<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProcessSquizEdit Interactive Learning Experience</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <div class="learning-container">
        <header class="learning-header">
            <h1>üéØ ProcessSquizEdit Mastery</h1>
            <p class="subtitle">Interactive Learning Experience for Component Conversion</p>
            <div class="progress-indicator">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </header>

        <!-- Navigation Menu -->
        <nav class="lesson-nav">
            <div class="nav-container">
                <h3>Learning Modules</h3>
                <div class="lesson-buttons">
                    <button class="lesson-nav-btn active" onclick="showLesson(1)" data-lesson="1">
                        <span class="lesson-num">1</span>
                        <span class="lesson-title">Understanding the Problem</span>
                    </button>
                    <button class="lesson-nav-btn" onclick="showLesson(2)" data-lesson="2">
                        <span class="lesson-num">2</span>
                        <span class="lesson-title">Core Implementation</span>
                    </button>
                    <button class="lesson-nav-btn" onclick="showLesson(3)" data-lesson="3">
                        <span class="lesson-num">3</span>
                        <span class="lesson-title">Configuration Formats</span>
                    </button>
                    <button class="lesson-nav-btn" onclick="showLesson(4)" data-lesson="4">
                        <span class="lesson-num">4</span>
                        <span class="lesson-title">Real-World Examples</span>
                    </button>
                    <button class="lesson-nav-btn" onclick="showReference()" data-lesson="ref">
                        <span class="lesson-num">üìö</span>
                        <span class="lesson-title">Quick Reference</span>
                    </button>
                </div>
            </div>
        </nav>

        <div class="learning-content">
            <!-- Lesson 1: Understanding the Problem -->
            <section class="lesson" id="lesson-1">
                <div class="lesson-header">
                    <span class="lesson-number">Module 1</span>
                    <h2>Understanding the Problem</h2>
                </div>
                
                <div class="content">
                    <div class="problem-statement">
                        <h3>ü§î The Challenge</h3>
                        <p>Shared global utilities (cards, buttons, etc.) need different <code>data-sq-field</code> values depending on which component uses them, but they share the same template structure.</p>
                        
                        <div class="example-scenario">
                            <h4>Scenario Example</h4>
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <h5>Shared Card Template</h5>
                                    <pre><code class="language-handlebars">&lt;h3 data-se="title"&gt;{{title}}&lt;/h3&gt;
&lt;p data-se="description"&gt;{{description}}&lt;/p&gt;</code></pre>
                                </div>
                                <div class="scenario-card">
                                    <h5>Component A Needs</h5>
                                    <pre><code class="language-html">data-sq-field="heroCards[0].title"
data-sq-field="heroCards[0].description"</code></pre>
                                </div>
                                <div class="scenario-card">
                                    <h5>Component B Needs</h5>
                                    <pre><code class="language-html">data-sq-field="contentConfig.featuredTitle"
data-sq-field="contentConfig.featuredDesc"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="solution-preview">
                        <h3>üí° The Solution (for now!)</h3>
                        <p>The <code>processSquizEdit</code> method maps generic <code>data-se</code> attributes to specific <code>data-sq-field</code> values for each component's data structure.</p>
                        
                        <div class="interactive-demo">
                            <h4>See It In Action</h4>
                            <div class="demo-controls">
                                <button class="demo-btn active" onclick="showDemo('before')">Before Processing</button>
                                <button class="demo-btn" onclick="showDemo('after')">After Processing</button>
                            </div>
                            
                            <div class="demo-output" id="demo-output-1">
                                <div class="demo-html">
                                    <h3 data-se="title">Amazing Feature</h3>
                                    <p data-se="description">This is a great feature description.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-navigation">
                    <button class="nav-btn prev-btn" onclick="showReference()" disabled>
                        ‚Üê Previous
                    </button>
                    <button class="nav-btn next-btn" onclick="showLesson(2)">
                        Next: Core Implementation ‚Üí
                    </button>
                </div>
            </section>

            <!-- Lesson 2: Core Implementation -->
            <section class="lesson hidden" id="lesson-2">
                <div class="lesson-header">
                    <span class="lesson-number">Module 2</span>
                    <h2>Core Implementation Steps</h2>
                </div>
                
                <div class="content">
                    <div class="implementation-steps">
                        <h3>üîß 5-Step Implementation Process</h3>
                        
                        <div class="step-by-step">
                            <div class="step" data-step="1">
                                <div class="step-header" onclick="toggleStep(1)">
                                    <span class="step-number">1</span>
                                    <h4>Import the Utility Function</h4>
                                    <span class="step-toggle">‚ñº</span>
                                </div>
                                <div class="step-content">
                                    <pre><code class="language-javascript">import { processSquizEdit } from '../../global/js/utils/processEditor';</code></pre>
                                    <p class="step-note">Only import <code>processSquizEdit</code> - no other utilities needed!</p>
                                </div>
                            </div>

                            <div class="step" data-step="2">
                                <div class="step-header" onclick="toggleStep(2)">
                                    <span class="step-number">2</span>
                                    <h4>Detect Edit Mode</h4>
                                    <span class="step-toggle">‚ñº</span>
                                </div>
                                <div class="step-content">
                                    <pre><code class="language-javascript">const squizEdit = info?.ctx?.editor || false;</code></pre>
                                    <p class="step-note">Simple boolean check - true in edit mode, false in front-end mode.</p>
                                </div>
                            </div>

                            <div class="step" data-step="3">
                                <div class="step-header" onclick="toggleStep(3)">
                                    <span class="step-number">3</span>
                                    <h4>Make Variables Mutable</h4>
                                    <span class="step-toggle">‚ñº</span>
                                </div>
                                <div class="step-content">
                                    <pre><code class="language-javascript">// CHANGE: const to let for mutability
let { title, content } = args || {};</code></pre>
                                    <p class="step-note">Variables need to be mutable so we can add defaults in edit mode.</p>
                                </div>
                            </div>

                            <div class="step" data-step="4">
                                <div class="step-header" onclick="toggleStep(4)">
                                    <span class="step-number">4</span>
                                    <h4>Configure Edit Targets</h4>
                                    <span class="step-toggle">‚ñº</span>
                                </div>
                                <div class="step-content">
                                    <pre><code class="language-javascript">let squizEditTargets = null;
if (squizEdit) {
    // Ensure fallback values are set in edit mode for a graceful ui
    title = title || 'Add your title';
    content = content || 'Add content';
    
    // Configure the edit targets for the component
    squizEditTargets = {
        "title": { "field": "title" },
        "content": { "field": "content" }
    };
}</code></pre>
                                    <p class="step-note">Only configure in edit mode. Always provide defaults for empty fields.</p>
                                </div>
                            </div>

                            <div class="step" data-step="5">
                                <div class="step-header" onclick="toggleStep(5)">
                                    <span class="step-number">5</span>
                                    <h4>Process Template with Squiz Edit Attributes</h4>
                                    <span class="step-toggle">‚ñº</span>
                                </div>
                                <div class="step-content">
                                    <pre><code class="language-javascript">const componentData = { title, content };

                                        // If not in edit mode, return the original template
                                        if (!squizEdit) return template(componentData);

                                        // If in edit mode, process the template to support page buileder
                                        return processEditor(template(componentData), squizEditTargets);</code></pre>
                                    <p class="step-note">Clean separation: front-end gets original template, edit mode gets processed version with data-sq-field attributes.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-navigation">
                    <button class="nav-btn prev-btn" onclick="showLesson(1)">
                        ‚Üê Previous: Understanding the Problem
                    </button>
                    <button class="nav-btn next-btn" onclick="showLesson(3)">
                        Next: Configuration Formats ‚Üí
                    </button>
                </div>
            </section>

            <!-- Lesson 3: Configuration Formats -->
            <section class="lesson hidden" id="lesson-3">
                <div class="lesson-header">
                    <span class="lesson-number">Module 3</span>
                    <h2>Configuration Formats</h2>
                </div>
                
                <div class="content">
                    <div class="format-selector">
                        <h3>üìã Three Mapping Formats</h3>
                        <div class="format-tabs">
                            <button class="format-tab active" onclick="showFormat('simple')">Format 1: Simple</button>
                            <button class="format-tab" onclick="showFormat('array')">Format 2: Array</button>
                            <button class="format-tab" onclick="showFormat('custom')">Format 3: Custom</button>
                        </div>
                    </div>

                    <div class="format-content" id="format-simple">
                        <div class="format-explanation">
                            <h4>Format 1: Simple Field Mapping</h4>
                            <p>Maps a single <code>data-se</code> attribute to a single component field.</p>
                            
                            <div class="format-example">
                                <div class="example-section">
                                    <h5>Configuration</h5>
                                    <pre><code class="language-javascript">"title": {
    "field": "headingConfiguration.title"
}</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Template</h5>
                                    <pre><code class="language-handlebars">&lt;h2 data-se="title"&gt;{{title}}&lt;/h2&gt;</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Result</h5>
                                    <pre><code class="language-html">&lt;h2 data-se="title" data-sq-field="headingConfiguration.title"&gt;{{title}}&lt;/h2&gt;</code></pre>
                                </div>
                            </div>
                            
                            <div class="when-to-use">
                                <h5>When to Use</h5>
                                <ul>
                                    <li>Single element with unique <code>data-se</code> attribute</li>
                                    <li>Direct field mapping to component property</li>
                                    <li>No array processing needed</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="format-content hidden" id="format-array">
                        <div class="format-explanation">
                            <h4>Format 2: Array with Auto-Indexing</h4>
                            <p>Maps multiple elements with the same <code>data-se</code> attribute to an array with automatic indexing.</p>
                            
                            <div class="format-example">
                                <div class="example-section">
                                    <h5>Configuration</h5>
                                    <pre><code class="language-javascript">"button": {
    "field": "buttons",
    "array": true,
    "property": "buttonText"
}</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Template</h5>
                                    <pre><code class="language-handlebars">{{#each buttons}}
&lt;span data-se="button"&gt;{{buttonText}}&lt;/span&gt;
{{/each}}</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Result</h5>
                                    <pre><code class="language-html">&lt;span data-se="button" data-sq-field="buttons[0].buttonText"&gt;Button 1&lt;/span&gt;
&lt;span data-se="button" data-sq-field="buttons[1].buttonText"&gt;Button 2&lt;/span&gt;</code></pre>
                                </div>
                            </div>
                            
                            <div class="when-to-use">
                                <h5>When to Use</h5>
                                <ul>
                                    <li>Multiple similar elements (cards, buttons in a list)</li>
                                    <li>All elements map to the same array structure</li>
                                    <li>Want automatic indexing [0], [1], etc.</li>
                                    <li>Homogeneous collections</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="format-content hidden" id="format-custom">
                        <div class="format-explanation">
                            <h4>Format 3: Custom Field Mapping</h4>
                            <p>Maps multiple elements with the same <code>data-se</code> attribute to different field paths.</p>
                            
                            <div class="format-example">
                                <div class="example-section">
                                    <h5>Configuration</h5>
                                    <pre><code class="language-javascript">"button": [
    { "field": "colTwo.buttonConfiguration.buttonText" },
    { "field": "colThree.buttonConfiguration.buttonText" }
]</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Template</h5>
                                    <pre><code class="language-handlebars">&lt;a data-se="button"&gt;Column Two Button&lt;/a&gt;
&lt;div class="info-box"&gt;
    &lt;a data-se="button"&gt;Column Three Button&lt;/a&gt;
&lt;/div&gt;</code></pre>
                                </div>
                                
                                <div class="example-section">
                                    <h5>Result</h5>
                                    <pre><code class="language-html">&lt;a data-se="button" data-sq-field="colTwo.buttonConfiguration.buttonText"&gt;Column Two Button&lt;/a&gt;
&lt;div class="info-box"&gt;
    &lt;a data-se="button" data-sq-field="colThree.buttonConfiguration.buttonText"&gt;Column Three Button&lt;/a&gt;
&lt;/div&gt;</code></pre>
                                </div>
                            </div>
                            
                            <div class="when-to-use">
                                <h5>When to Use</h5>
                                <ul>
                                    <li>Multiple elements with same <code>data-se</code> but different field paths</li>
                                    <li>Elements in different contexts or components</li>
                                    <li>Need precise control over field mapping</li>
                                    <li>Shared partials used in multiple contexts</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="lesson-navigation">
                    <button class="nav-btn prev-btn" onclick="showLesson(2)">
                        ‚Üê Previous: Core Implementation
                    </button>
                    <button class="nav-btn next-btn" onclick="showLesson(4)">
                        Next: Real-World Examples ‚Üí
                    </button>
                </div>
            </section>

            <!-- Lesson 4: Real-World Examples -->
            <section class="lesson hidden" id="lesson-4">
                <div class="lesson-header">
                    <span class="lesson-number">Module 4</span>
                    <h2>Real-World Examples</h2>
                </div>
                
                <div class="content">
                    <div class="examples-gallery">
                        <h3>üèóÔ∏è Component Conversion Examples</h3>
                        
                        <div class="example-cards">
                            <div class="example-card" onclick="showExample('text-callout')">
                                <h4>Text-Callout Component</h4>
                                <p>Simple component with title, content, image, and button</p>
                                <div class="example-tags">
                                    <span class="tag">Format 1</span>
                                    <span class="tag">Shared Partials</span>
                                </div>
                            </div>
                            
                            <div class="example-card" onclick="showExample('button-row')">
                                <h4>Button-Row Component</h4>
                                <p>Array of buttons with automatic indexing</p>
                                <div class="example-tags">
                                    <span class="tag">Format 2</span>
                                    <span class="tag">Array Handling</span>
                                </div>
                            </div>
                            
                            <div class="example-card" onclick="showExample('multicolumn')">
                                <h4>Multicolumn-Info Component</h4>
                                <p>Complex component with multiple sections and custom mapping</p>
                                <div class="example-tags">
                                    <span class="tag">Format 3</span>
                                    <span class="tag">Mixed Formats</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="example-detail" id="example-detail">
                        <div class="example-placeholder">
                            <h4>üëÜ Click an example above to see the implementation details</h4>
                            <p>Each example shows before/after code and explains the conversion process.</p>
                        </div>
                    </div>

                    <div class="best-practices">
                        <h3>‚úÖ Best Practices Checklist</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-1" />
                                <label for="practice-1">Use static <code>data-se</code> attributes in templates</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-2" />
                                <label for="practice-2">Never pass dynamic <code>data-se</code> values through partials</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-3" />
                                <label for="practice-3">Always provide defaults for empty fields in edit mode</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-4" />
                                <label for="practice-4">Use early return pattern for performance</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-5" />
                                <label for="practice-5">Test both edit and front-end modes</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="practice-6" />
                                <label for="practice-6">Keep shared partials generic with reusable attribute names</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-navigation">
                    <button class="nav-btn prev-btn" onclick="showLesson(3)">
                        ‚Üê Previous: Configuration Formats
                    </button>
                    <button class="nav-btn next-btn" onclick="showReference()">
                        Next: Quick Reference ‚Üí
                    </button>
                </div>
            </section>

            <!-- Quick Reference -->
            <section class="lesson hidden" id="reference">
                <div class="lesson-header">
                    <span class="lesson-number">üìö</span>
                    <h2>Quick Reference</h2>
                </div>
                
                <div class="content">
                    <div class="reference-grid">
                        <div class="reference-card">
                            <h4>Essential Import</h4>
                            <pre><code class="language-javascript">import { processSquizEdit } from '../../global/js/utils/processEditor';</code></pre>
                        </div>
                        
                        <div class="reference-card">
                            <h4>Edit Mode Detection</h4>
                            <pre><code class="language-javascript">const squizEdit = info?.ctx?.editor || false;</code></pre>
                        </div>
                        
                        <div class="reference-card">
                            <h4>Simple Field Mapping</h4>
                            <pre><code class="language-javascript">"title": { "field": "title" }</code></pre>
                        </div>
                        
                        <div class="reference-card">
                            <h4>Array Mapping</h4>
                            <pre><code class="language-javascript">"button": {
    "field": "buttons",
    "array": true,
    "property": "buttonText"
}</code></pre>
                        </div>
                        
                        <div class="reference-card">
                            <h4>Custom Mapping</h4>
                            <pre><code class="language-javascript">"button": [
    { "field": "colTwo.buttonText" },
    { "field": "colThree.buttonText" }
]</code></pre>
                        </div>
                        
                        <div class="reference-card">
                            <h4>Early Return Pattern</h4>
                            <pre><code class="language-javascript">if (!squizEdit) return template(data);
return processEditor(template(data), targets);</code></pre>
                        </div>
                    </div>

                    <div class="troubleshooting">
                        <h3>üîß Common Issues & Solutions</h3>
                        <div class="troubleshooting-list">
                            <div class="issue">
                                <h4>Issue: Elements not editable in Page Builder</h4>
                                <p><strong>Solution:</strong> Check that <code>data-se</code> attributes are static in templates and properly mapped in <code>squizEditTargets</code>.</p>
                            </div>
                            <div class="issue">
                                <h4>Issue: Array items not getting correct indexes</h4>
                                <p><strong>Solution:</strong> Ensure you're using Format 2 with <code>"array": true</code> and <code>"property"</code> specified.</p>
                            </div>
                            <div class="issue">
                                <h4>Issue: Shared partials not working</h4>
                                <p><strong>Solution:</strong> Use generic <code>data-se</code> names in partials, map them in component's <code>squizEditTargets</code>.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-navigation">
                    <button class="nav-btn prev-btn" onclick="showLesson(4)">
                        ‚Üê Previous: Real-World Examples
                    </button>
                    <button class="nav-btn next-btn" onclick="showLesson(1)">
                        Start Over ‚Üí
                    </button>
                </div>
            </section>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 